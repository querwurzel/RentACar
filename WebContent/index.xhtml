<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>RentACar</title>
</h:head>
<h:body>

<h1><h:graphicImage alt="" title="RentACar" value="/images/car.jpg" />RentACar</h1>

<h:form>
	<h:commandButton value="Logout" action="#{userHandler.logout}" />
</h:form>

<h2>Please select a car for rental</h2>

<h:form>

	<fieldset>
		<h:selectOneListbox style="width:150px; height:150px" id="carType" size="5" value="#{carHandler.carTypeId}" required="true">
			<f:selectItems value="#{carHandler.allCarTypes}" var="ct" itemLabel="#{ct.name}" itemValue="#{ct.id}" />
			<f:ajax execute="carType" render="@form" listener="#{carHandler.updateCarTypeAsynchronous}" />
		</h:selectOneListbox>
		<h:commandButton value="Select CarType" actionListener="#{carHandler.updateCarType}">
			<f:ajax execute="carType" render="@form" />
		</h:commandButton>
	</fieldset>
	
	<fieldset>
		<h:selectOneListbox style="width:150px; height:150px" id="car" size="5" value="#{carHandler.carId}">
			<f:selectItems value="#{carHandler.allCars}" var="c" itemLabel="#{c.name}" itemValue="#{c.id}" />
			<f:ajax execute="car" render="@form" listener="#{carHandler.updateCarAsynchronous}" />
		</h:selectOneListbox>
		<h:commandButton value="Select Car" actionListener="#{carHandler.updateCar}">
			<f:ajax execute="car" render="@form" />
		</h:commandButton>
	</fieldset>
	
	<fieldset>
			
		<h:panelGrid columns="2">
			<h:outputText value="Name:" />
			<h:outputText value="#{carHandler.name}" />
			
			<h:outputText value="Description:" />
			<h:outputText value="#{carHandler.description}" />
		
			<h:outputText value="Daily Fee:" />
			<h:panelGroup>
			<h:outputText value="#{carHandler.dailyFee}">
				<f:convertNumber currencyCode="#{carHandler.currency}" />
			</h:outputText>
			<span/>
			<h:outputText value="#{carHandler.currency}" />
			</h:panelGroup>
			
			<h:outputText value="Image:" />
			<h:graphicImage alt="" title="#{carHandler.name}" value="/images/cars/#{carHandler.image}" rendered="#{carHandler.image != null}" />
			
			<h:commandButton value="Rent" action="#{carHandler.selectCar}" rendered="#{carHandler.carId != null}" />
		</h:panelGrid>

	</fieldset>

</h:form>

</h:body>
</html>